\chapter{Optimizing network-utilization by balancing workload}
\label{chap:balancing}

The last chapter brings an overview of different notations, algorithms and techniques.
In this chapter, all these instruments are combined to a chain for distributing routes more evenly, that are preferred by routing-algorithms like \gls{dijkstra}.

For a given \gls{sdpair} and a graph $G = (V, E)$ with vertices $V$ and edges $E$ of $d$-dimensional edge-weights, a path should be found through an algorithm, that implicitly tends to distribute found paths over the network while keeping the paths' costs sufficiently near every cost-dimension's optimum.
To achieve this, a preprocessing-phase called \textit{balancing} analyzes the graph $G$ and computes a new metric for every edge.
With this metric, routing-algorithms like \gls{dijkstra} \todo{TODO Check if \gls{dijkstra} really improves distribution or \gls{cyclops} has to be used.} (with \gls{personalized_routing}) and \gls{cyclops} can compute paths as usual.

This \textit{balancing} is depicted in figure~\ref{fig:balancing}.
At first, the graph, that should be balanced, has to be read in, resulting in $G = (V, E)$ of $d$ metrics.
This graph $G$ is contracted via \gls{contraction-hierarchies} to improve the performance.

\begin{figure}
    \centering
    \input{res/graphics/balancing}
    \caption[Overview of balancing a graph]{%
        This flow shows the balancer, that analyzes a given graph $G$.
        Shapes for actions are rectangular and blue, shapes for data are elliptical and red.
        A metric is created and updated, that distributes upcoming workload (like during rush-hour) more evenly over the graph.
        \label{fig:balancing}
    }
\end{figure}

\todo{TODO Routes within a certain tolerance of the best possible cost (per metric, e.g. duration must be not worse than $25~\%$ \todo{tolerance should match the resulting plots}) are randomly chosen from \gls{cyclops}.}

TODOs
\begin{enumerate}
    \item \todo{both approaches: multiple runs (explicit euler because workload is toggling) vs multiple metrics}
    \item \todo{highlights, what was difficult/much work? -> repo-link}
    \item \todo{implementation -> sub-chapter of chapter 3}
    \item \todo{normalization of all metrics -> comparability between different graphs}
\end{enumerate}

\input{src/content/balancing/implementation}